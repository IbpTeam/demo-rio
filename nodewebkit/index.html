<!DOCTYPE html>
<html>
  <head>
    <title>test</title>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
  <style type="text/css">
  a {
  font-size: 25px;
  font-family: sans-serif;
  line-height: 2;
  }
  </style>
  </head>
  <body>
<!--  <script>
  function GetData() {
  var str='{"postfix":"jpg", "filename":"girl1","id":"2", "path":"./demo-rion", "time":2014}';
  var json=JSON.parse(str);
  alert(json);
  }
  </script>
    <input type="button" name="button1" value="Test" onclick=GetData()>
--> 
<!--   <object style="border:0px" type="text/x-scriptlet" data="backend/test1.html" width=100% height=100%></object> -->
    <a href="backend/test1.html">App: test1</a><br>
    <a href="backend/qrtest.html">App: Show QR code</a><br>
    <hr>
    <br>
    <a href="frontend-dev/index.html">App: frontend-dev</a><br>
    <a href="frontend-dev/db-manager.html">App: db-insert-data</a><br>
    <a href="frontend-obsolute/browser.html">App: frontend-obsolute</a><br>
   <!--a href="file-explorer/file-explorer.html">App: file-explorer</a><br-->
  </body>
  <script>

var config = require("./backend/config");
var server = require("./backend/server");
var router = require("./backend/router");
var requestHandlers = require("./backend/requestHandlers");
var util = require('util');
var os = require('os');

var handle = {}
handle["/"] = requestHandlers.start;
handle["/start"] = requestHandlers.start;
handle["/getAllCate"] = requestHandlers.getAllCateInHttpServer;
handle["/getAllDataByCate"] = requestHandlers.getAllDataByCateInHttpServer;
handle["/getAllContacts"] = requestHandlers.getAllContactsInHttpServer;
handle["/loadResources"] = requestHandlers.loadResourcesInHttpServer;
handle["/rmDataById"] = requestHandlers.rmDataByIdInHttpServer;
handle["/getDataById"] = requestHandlers.getDataByIdInHttpServer;
handle["/getDataSourceById"] = requestHandlers.getDataSourceByIdInHttpServer;
handle["/updateDataValue"] = requestHandlers.updateDataValueInHttpServer;
handle["/getRecentAccessData"] = requestHandlers.getRecentAccessDataInHttpServer;
handle["/closeVNCandWebsockifyServer"] = requestHandlers.closeVNCandWebsockifyServerInHttpServer;
handle["/getServerAddress"] = requestHandlers.getServerAddressInHttpServer;

function getAddr(){
  var IPv4;
  for(var i=0;i<os.networkInterfaces().eth0.length;i++){
    if(os.networkInterfaces().eth0[i].family=='IPv4'){
      IPv4=os.networkInterfaces().eth0[i].address;
    }
  }
  return IPv4;
}

config.SERVERIP=getAddr();
config.SERVERNAME = os.hostname()+'('+config.SERVERIP+')';
server.start(router.route, handle);
server.listen();
server.advertise();

  </script>
</html>
